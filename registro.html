<!-- 5.-registro.html-->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registro y Login</title>
  <link rel="stylesheet" href="principal.css" />
  <script src="principal.js" defer></script>
</head>
<body>
  <header>
    <h1>Registro y Login</h1>
  </header>
  <h2>Por favor regístrate para poder tenerte más en cuenta y para que puedas estar más informado de nuestras promociones </h2>

  <nav class="menu">
    <ul id="menu-lista">
      <li><a href="principal.html">Inicio</a></li>
      <li><a href="servicios.html">Servicios</a></li>
      <li><a href="productos.html">Juegos</a></li>
      <li><a href="contacto.html">Contacto</a></li>
      <li><a href="registro.html">Registro</a></li>
    </ul>
  </nav>

  <main>
    <section id="registro">
      <form id="form-registro">
        <h2>Crear una cuenta</h2>
        <input type="text" name="nombre" placeholder="Nombre completo" required />
        <input type="email" name="email" placeholder="Correo electrónico" required />
        <input type="password" name="contraseña" placeholder="Contraseña" required />
        <input type="password" name="confirmar_contraseña" placeholder="Confirmar contraseña" required />
        <button type="submit">Registrarse</button>
      </form>
    </section>

    <section id="login">
      <form id="form-login">
        <h2>Iniciar sesión</h2>
        <input type="email" name="email_login" placeholder="Correo electrónico" required />
        <input type="password" name="contraseña_login" placeholder="Contraseña" required />
        <button type="submit">Iniciar sesión</button>
      </form>
    </section>
  </main>

  <footer>
    <p>© 2025 Tienda de Juegos Físicos y Digitales - NeoTheEnd</p>
  </footer>

  <script>
    // Registro del usuario, incluyendo un administrador
    const formR = document.getElementById("form-registro");
    if (formR) {
      formR.addEventListener("submit", function (e) {
        e.preventDefault();
        const nombre = this.nombre.value;
        const email = this.email.value;
        const pass = this.contraseña.value;
        const confirmar = this.confirmar_contraseña.value;

        if (pass !== confirmar) return alert("Las contraseñas no coinciden.");

        // Si el correo es el del administrador, asignar admin
        const rol = (email === "fullmetal90000@gmail.com" && pass === "samurai9000") ? "admin" : "usuario";

        const usuario = { nombre, email, contraseña: pass, historial: [], rol: rol }; // El rol es dinámico
        localStorage.setItem("usuario_" + email, JSON.stringify(usuario)); // Guarda el usuario en el localStorage
        alert("¡Registro exitoso!");
        this.reset();
      });
    }
  </script>
</body>
</html>
